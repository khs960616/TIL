## 컨테이너란 
호스트 머신에서, 다른 프로세스들과 격리된 상태로 실행되는 sandboxed process이다.

이러한 격리 환경은 linux 커널에ㅌ 오래전부터 있던 cgroup과 namespace을 활용해서 구현되어있다.

도커는 이러한 cgroup, namespace개념을 사용하기 쉽게 만들어준다. 

도커 컨테이너는 실행가능한 이미지의 인스턴스이며 도커 API, 또는 CLI에서 실행, 멈춤, 삭제가 가능하다. 또한 이러한 컨테이너는 로컬 머신, 가상 머신, 클라우드 환경하에 배포할 수 있으며 어떠한 OS에서도 실행 가능하다. 

특정 프로세스의 파일 시스템의 root를 변경하는 chroot 명령어와 친숙하다면, 컨테이너는 격리된 환경을 제공하는 확장된 형태의 chroot라고 볼 수 있다. 



## 도커 이미지 
컨테이너는 격리된 파일시스템을 이용한다. 이러한 고립된 파일 시스템은 이미지에 의해 제공되며, 이미지는 어플리케이션 실행에 필요한 모든 의존성, Configuration, 스크립트환경변수, 기본 실행 명령어, 메타데이터 등 모든 것을 포함하고 있어야한다. 

도커 컨테이너가 실행될 때 컨테이너는 이미지가 가지고 있는 다양한 레이어로 이루어진 파일 시스템을 가진다. 각 컨테이너가 가지고 있는 파일 시스템은 개별 컨테이너별로 고유하며, 이미지가 같다고 하더라도 공유되지 않는다. 

## 도커 볼륨
따라서 별도의 작업이 이루어지지 않는다면, 컨테이너가 제거되는 시점에 컨테이너 내부의 변경사항은 모두 없어지게 된다. 

Volume을 사용하면 이러한 문제를 다룰 수 있다. 볼륨은 컨테이너의 특정 파일 시스템 경로를, 호스트 머신에 연결할 수 있는 기능을 제공한다. 
컨테이너의 디렉터리를 마운트하면, 해당 디렉토리의 변경사항이 호스트머신에도 반영된다.

도커에서 볼륨을 마운트하는 두 가지 타입 (volume mount, bind mounts)
- volumn 마운트는 어플리케이션의 데이터를 영구적으로 저장하기 위한 용도로 사용하기 좋다.
- bind mount: 호스트 파일 시스템의 디렉토리를 컨테이너 내부로 공유시키는 방식 

-- docker volumn inspect 명령어를 사용하면, 실제 도커가 볼륨을 사용중일때, 데이터를 저장하는 방식을 알 수 있다. 



## 도커 네트워크 
시스템에서 각 개별 컴포넌트는 서로 개별적으로으로 scale out하거나, 특정 컴포넌트를 다른 컴포넌트로 대체해서 사용하고자하는 요구사항이 존재할 수 있다.

multi container apps은 위 관점에서 단일 컨테이너에 시스템의 모든 구성요소를 넣는것보다 유리한점이 있다. (단점은?)

기본적으로 컨테이너들은 각기 고립된 환경에서 실행되므로, 같은 머신 내에서 실행중인 프로세스 또는 컨테이너가 어떤 것이 있는지 알지 못한다. 따라서 각 컨테이너간의 통신을 위해서는 network를 설정해줘야한다.

docker network create <NETWORK NAME> (1) 네트워크 생성
docker run ...  --network <NETWORK NAME> --network-alias <ALIAS> (2) 컨테이너의 네트워크 설정 
